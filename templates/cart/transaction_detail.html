{% extends 'dashboard/_base.html' %}
{% block title %}Cart Details{% endblock title %}
{% block navbarbrand %}Cart Details{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <a href="{% url 'transaction_list' %}" class="btn btn-success" style="color:black; float:right;"><< Back to Transactions</a>
    </div>
</div>
<div class ="row">
    <div class="col-md-6 col-sm-12">
        <div class="card">
            <div class="card-header">
                <h6 class="card-title">Transaction Details</h6>
            </div>
            <div class="card-body">
                <table class="table table-hover">
                    <tr>
                      <th scope="row">Payment Method</th>
                      <td>{{transaction.payment_method}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Amount</th>
                      <td>{{transaction.currency}} {{transaction.amount}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Date Paid</th>
                      <td>{{transaction.created_date}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Confirmation Code</th>
                      <td>{{transaction.confirmation_code}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Status</th>
                      <td>{{transaction.payment_status_description}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Payment Account</th>
                      <td>{{transaction.payment_account}} for {{cart.user.email}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h6 class="card-title">Cart Details</h6>
            </div>
            <div class="card-body">
                <table class="table table-hover">
                    <tr>
                      <th scope="row">Cart #</th>
                      <td>{{transaction.merchant_reference}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Owner</th>
                      <td>{{cart.user.email}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Completed</th>
                      <td>{{cart.completed}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Sub Total</th>
                      <td>{{transaction.currency}} {{cart.total_price}}</td>
                    </tr>
                    <tr>
                      <th scope="row">VAT</th>
                      <td>{{transaction.currency}} {{cart.vat}}</td>
                    </tr>
                    <tr>
                      <th scope="row">Total</th>
                      <td>{{transaction.currency}} {{cart.final_price}}</td>
                    </tr>

                </table>
            </div>
        </div>
    </div>
</div>
<div class ="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h6 class="card-title">Cart Items</h6>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table id="datatable" class="table table-striped table-bordered" cellspacing="0" width="100%">
                        <thead class=" text-primary">
                            <tr>
                                <th style="color: #F49F1B;">
                                    Quantity
                                </th>
                                <th style="color: #F49F1B;">
                                    Photo
                                </th>
                                <th style="color: #F49F1B;">
                                    Owner
                                </th>
                                <th style="color: #F49F1B;">
                                    Thumbnail
                                </th>
                                <th style="color: #F49F1B;">
                                    Price
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in cart_items %}
                            <tr>
                                <td>
                                    {{item.quantity}}
                                </td>
                                <td>
                                    {{item.photo.title}}
                                </td>
                                <td>
                                    {{item.photo.owner.first_name}} {{item.photo.owner.last_name}}
                                </td>
                                <td>
									<img src="{{item.photo.webp_image}}" style="width: 70px; height: auto"alt="{{item.photo.title}}">
                                </td>
                                <td>
                                    {{item.photo.price}}
                                </td>

                            </tr>
                            {% endfor %}
                        </tbody>
                        <thead class=" text-primary">
                            <tr>
                                <th style="color: #F49F1B;">
                                    Quantity
                                </th>
                                <th style="color: #F49F1B;">
                                    Photo
                                </th>
                                <th style="color: #F49F1B;">
                                    Owner
                                </th>
                                <th style="color: #F49F1B;">
                                    Thumbnail
                                </th>
                                <th style="color: #F49F1B;">
                                    Price
                                </th>
                            </tr>
                        </thead>
          </table>

        </div>

      </div>
    </div>
  </div>
</div>
{% endblock content %}